<html>
    <head>
        <script src="supervideo.js"></script> 
        <script type="text/javascript">
         
            var socket = null;

            function printOutput(str)
            {
                document.getElementById("output").innerHTML = str;
            }

            function printSocketData(str)
            {
                document.getElementById("socket_data").innerHTML = str;
            }




            function onConnectClick()
            {
                if (socket != null)
                {
                    socket.close();
                }
                printSocketData("");

                socket = new WebSocket("ws://" + document.getElementById("connect_box").value + ":8080");
                socket.binaryType = "arraybuffer";

                socket.onopen = function(evt)
                {
                    printOutput("Socket opened");
                };

                socket.onmessage = function(evt)
                {
                    var data = getPacketData(evt);
                    
                    if(data.type == PacketIDPlayerInfo)
                    {
                        printOutput("Client: " + data.clientID + ", player: " + data.playerID + " - " + data.name);
                    }
                    else
                    {
                        printOutput("Data type was " + data.type);
                    }
                }

                socket.onclose = function(evt)
                {
                    printOutput("Socket closed: " + evt.code);
                }
            }

            function onSendClick()
            {
                //document.getElementById("output").innerHTML = document.getElementById("message_box").value;
                if (socket != null)
                {
                    socket.send(document.getElementById("message_box").value);
                }
            }


        </script>
    </head>
    <body>
        <p><input type="text" id="connect_box" name="connect_box"><button onclick="onConnectClick()" type="button" id="connect_button" name="connect_button">Connect</button></p>
        <p><input type="text" id="message_box" name="message_box"><button onclick="onSendClick()" type="button" id="message_button" name="message_button">Send</button></p>
        <p id="output"></p>
        <p id="socket_data"></p>
    </body>
</html>